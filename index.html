<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Competition Simulator â€” ì‹ í•œ ìŠ¤í€˜ì–´ë¸Œë¦¿ì§€ ê¸€ë¡œë²Œ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=DM+Mono:wght@400;500&family=Bebas+Neue&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   âš™ï¸  API KEY ì„¤ì • â€” ì—¬ê¸°ë§Œ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤
   ë°œê¸‰: console.anthropic.com â†’ API Keys
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ ë¦¬ì…‹ & ë³€ìˆ˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --bg:        #F5F6F8;
  --surface:   #FFFFFF;
  --surface2:  #F0F2F5;
  --border:    #E2E5EA;
  --text:      #1A1D23;
  --muted:     #8A919E;
  --light:     #B0B8C4;

  /* ì‹ í•œ ë¸Œëœë“œ ì»¬ëŸ¬ */
  --shinhan:   #003DA5;   /* ì‹ í•œ ë”¥ ë¸”ë£¨ */
  --shinhan2:  #0055CC;
  --gold:      #C5972B;   /* ì‹ í•œ ê³¨ë“œ */
  --gold-lt:   #F5EDD6;

  --bf:        #1A56DB;   /* Battlefield */
  --bf-lt:     #EEF3FF;
  --yfn:       #0D9E6A;   /* 4YFN */
  --yfn-lt:    #EDFAF4;
  --danger:    #DC2626;
  --danger-lt: #FEF2F2;
  --warn:      #D97706;
  --warn-lt:   #FFFBEB;
  --ok:        #059669;

  --font-main: 'Noto Sans KR', sans-serif;
  --font-mono: 'DM Mono', monospace;
  --font-eng:  'Bebas Neue', sans-serif;

  --radius: 10px;
  --shadow: 0 1px 4px rgba(0,0,0,0.07), 0 4px 16px rgba(0,0,0,0.05);
  --shadow-lg: 0 4px 24px rgba(0,0,0,0.10);
}
html { scroll-behavior: smooth; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-main);
  font-size: 15px;
  line-height: 1.7;
  -webkit-font-smoothing: antialiased;
}
::selection { background: var(--shinhan); color: #fff; }
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

/* â”€â”€ í—¤ë” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.site-header {
  background: var(--shinhan);
  padding: 0 32px;
  display: flex;
  align-items: center;
  height: 60px;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 2px 12px rgba(0,61,165,0.25);
}
.logo-wrap {
  display: flex;
  align-items: center;
  gap: 12px;
}
.logo-icon {
  width: 32px;
  height: 32px;
  background: var(--gold);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  flex-shrink: 0;
}
.logo-text-main {
  font-size: 15px;
  font-weight: 700;
  color: #fff;
  letter-spacing: -0.01em;
}
.logo-text-sub {
  font-size: 10px;
  color: rgba(255,255,255,0.55);
  letter-spacing: 0.06em;
  margin-top: -2px;
}
.header-badge {
  margin-left: 16px;
  font-size: 10px;
  font-weight: 500;
  letter-spacing: 0.08em;
  color: var(--gold);
  border: 1px solid var(--gold);
  padding: 2px 9px;
  border-radius: 20px;
}
.header-right {
  margin-left: auto;
  font-size: 11px;
  color: rgba(255,255,255,0.45);
  letter-spacing: 0.04em;
}

/* â”€â”€ íˆì–´ë¡œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hero {
  background: linear-gradient(135deg, var(--shinhan) 0%, #001F6B 100%);
  padding: 64px 32px 56px;
  text-align: center;
  position: relative;
  overflow: hidden;
}
.hero::before {
  content: '';
  position: absolute;
  inset: 0;
  background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.025'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
.hero-inner { position: relative; max-width: 680px; margin: 0 auto; }
.hero-eyebrow {
  display: inline-flex;
  align-items: center;
  gap: 7px;
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--gold);
  border: 1px solid rgba(197,151,43,0.4);
  padding: 5px 14px;
  border-radius: 20px;
  margin-bottom: 28px;
  background: rgba(197,151,43,0.08);
}
.hero h1 {
  font-size: clamp(32px, 5vw, 52px);
  font-weight: 900;
  color: #fff;
  letter-spacing: -0.03em;
  line-height: 1.1;
  margin-bottom: 18px;
}
.hero h1 span { color: var(--gold); }
.hero-desc {
  font-size: 15px;
  color: rgba(255,255,255,0.65);
  line-height: 1.8;
  max-width: 500px;
  margin: 0 auto 36px;
}
.hero-pills {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
}
.pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 500;
  padding: 6px 14px;
  border-radius: 20px;
  border: 1px solid;
}
.pill.bf  { color: #93C5FD; border-color: rgba(147,197,253,0.3); background: rgba(147,197,253,0.08); }
.pill.yfn { color: #6EE7B7; border-color: rgba(110,231,183,0.3); background: rgba(110,231,183,0.08); }
.pill.neutral { color: rgba(255,255,255,0.45); border-color: rgba(255,255,255,0.12); background: rgba(255,255,255,0.04); }

/* â”€â”€ ë©”ì¸ ì»¨í…Œì´ë„ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.main {
  max-width: 780px;
  margin: 0 auto;
  padding: 40px 24px 100px;
}

/* â”€â”€ ì„¹ì…˜ í—¤ë” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sec-title {
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 14px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.sec-title::before {
  content: '';
  display: block;
  width: 3px;
  height: 14px;
  background: var(--shinhan);
  border-radius: 2px;
}

/* â”€â”€ ì¹´ë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
  margin-bottom: 20px;
}

/* â”€â”€ ê²½ì—° ì„ íƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.comp-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0;
}
@media (max-width: 520px) { .comp-grid { grid-template-columns: 1fr; } }

.comp-card {
  padding: 22px 22px 20px;
  cursor: pointer;
  border-right: 1px solid var(--border);
  transition: background 0.15s;
  position: relative;
  user-select: none;
}
.comp-card:last-child { border-right: none; }
.comp-card:hover { background: var(--surface2); }

.comp-card.active-bf { background: var(--bf-lt); }
.comp-card.active-yfn { background: var(--yfn-lt); }

.comp-check {
  position: absolute;
  top: 18px; right: 18px;
  width: 20px; height: 20px;
  border: 2px solid var(--border);
  border-radius: 5px;
  display: flex; align-items: center; justify-content: center;
  font-size: 11px;
  transition: all 0.15s;
  background: var(--surface);
}
.active-bf .comp-check { border-color: var(--bf); background: var(--bf); color: #fff; }
.active-yfn .comp-check { border-color: var(--yfn); background: var(--yfn); color: #fff; }

.comp-icon { font-size: 24px; margin-bottom: 10px; }
.comp-name { font-size: 14px; font-weight: 700; margin-bottom: 3px; }
.comp-name.bf { color: var(--bf); }
.comp-name.yfn { color: var(--yfn); }
.comp-goal { font-size: 12px; color: var(--muted); margin-bottom: 6px; }
.comp-desc { font-size: 11px; color: var(--light); }

/* â”€â”€ í¼ í•„ë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.form-section {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
  margin-bottom: 20px;
}
.form-section-header {
  padding: 16px 22px;
  border-bottom: 1px solid var(--border);
  background: var(--surface2);
  font-size: 12px;
  font-weight: 700;
  color: var(--muted);
  letter-spacing: 0.06em;
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 8px;
}
.form-grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0;
}
@media (max-width: 560px) { .form-grid-2 { grid-template-columns: 1fr; } }

.field {
  padding: 18px 22px;
  border-right: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
}
.field:nth-child(2n) { border-right: none; }
.field.full { grid-column: 1 / -1; border-right: none; }
.field:last-child, .field.full:last-child { border-bottom: none; }

.field label {
  display: block;
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
  letter-spacing: 0.06em;
  text-transform: uppercase;
  margin-bottom: 8px;
}
.req { color: var(--bf); margin-left: 2px; }
.yfn-badge {
  font-size: 9px;
  font-weight: 600;
  color: var(--yfn);
  border: 1px solid var(--yfn);
  padding: 1px 6px;
  border-radius: 3px;
  margin-left: 4px;
  letter-spacing: 0.04em;
}

.field input, .field select, .field textarea {
  width: 100%;
  border: 1px solid var(--border);
  background: var(--bg);
  border-radius: 6px;
  color: var(--text);
  font-family: var(--font-main);
  font-size: 14px;
  padding: 9px 12px;
  outline: none;
  transition: border-color 0.18s, box-shadow 0.18s;
  resize: vertical;
}
.field input:focus, .field select:focus, .field textarea:focus {
  border-color: var(--shinhan);
  box-shadow: 0 0 0 3px rgba(0,61,165,0.08);
  background: var(--surface);
}
.field textarea { min-height: 88px; line-height: 1.65; }
.field select { appearance: none; cursor: pointer; }

/* â”€â”€ ì‹¤í–‰ ë²„íŠ¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.run-section {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px 22px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  flex-wrap: wrap;
  box-shadow: var(--shadow);
  margin-bottom: 32px;
}
.run-note { font-size: 12px; color: var(--muted); line-height: 1.7; }
.run-note strong { color: var(--text); }
.btn-run {
  display: inline-flex;
  align-items: center;
  gap: 9px;
  background: var(--shinhan);
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 13px 26px;
  font-family: var(--font-main);
  font-size: 14px;
  font-weight: 700;
  letter-spacing: -0.01em;
  cursor: pointer;
  transition: all 0.18s;
  box-shadow: 0 2px 12px rgba(0,61,165,0.3);
  white-space: nowrap;
}
.btn-run:hover:not(:disabled) {
  background: var(--shinhan2);
  transform: translateY(-1px);
  box-shadow: 0 4px 18px rgba(0,61,165,0.35);
}
.btn-run:disabled {
  background: var(--border);
  color: var(--light);
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}
.btn-arrow { font-size: 17px; transition: transform 0.18s; }
.btn-run:hover:not(:disabled) .btn-arrow { transform: translateX(3px); }

/* â”€â”€ ë¡œê·¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#log-section { display: none; margin-bottom: 32px; }
.log-card {
  background: #0F172A;
  border: 1px solid #1E293B;
  border-radius: var(--radius);
  overflow: hidden;
}
.log-card-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 18px;
  border-bottom: 1px solid #1E293B;
}
.log-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: var(--gold);
  animation: blink 1s ease infinite;
}
.log-dot.done { background: #34D399; animation: none; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.2} }
.log-title-text { font-size: 11px; color: #64748B; letter-spacing: 0.1em; text-transform: uppercase; font-family: var(--font-mono); }
#log-body {
  padding: 16px 18px;
  font-family: var(--font-mono);
  font-size: 12px;
  line-height: 2;
  max-height: 200px;
  overflow-y: auto;
  color: #475569;
}
.log-ok   { color: #34D399; }
.log-err  { color: #F87171; }
.log-info { color: #60A5FA; }
.log-done { color: var(--gold); font-weight: 500; }

/* â”€â”€ ê²°ê³¼ ì¹´ë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#results-section { display: none; }
.result-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-lg);
  overflow: hidden;
  margin-bottom: 20px;
  animation: slideUp 0.45s ease forwards;
}
@keyframes slideUp { from{opacity:0;transform:translateY(14px)} to{opacity:1;transform:translateY(0)} }

/* ê²°ê³¼ ìƒë‹¨ */
.result-top {
  padding: 26px 26px 0;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 16px;
  flex-wrap: wrap;
}
.result-comp-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  padding: 4px 11px;
  border-radius: 20px;
  margin-bottom: 14px;
}
.result-comp-badge.bf  { color: var(--bf);  background: var(--bf-lt);  }
.result-comp-badge.yfn { color: var(--yfn); background: var(--yfn-lt); }

.verdict-main {
  font-size: clamp(26px, 4vw, 38px);
  font-weight: 900;
  letter-spacing: -0.03em;
  line-height: 1.1;
  margin-bottom: 6px;
}
.verdict-main.selected     { color: var(--ok); }
.verdict-main.not-selected { color: var(--muted); }
.verdict-main.disqualified { color: var(--danger); }

.verdict-prob {
  font-size: 12px;
  color: var(--muted);
  font-family: var(--font-mono);
  margin-bottom: 18px;
}
.verdict-prob strong { font-size: 14px; font-weight: 600; }

.score-block { text-align: right; }
.score-big {
  font-family: var(--font-eng);
  font-size: 72px;
  line-height: 1;
  letter-spacing: -0.02em;
}
.score-big.high { color: var(--ok); }
.score-big.mid  { color: var(--warn); }
.score-big.low  { color: var(--danger); }
.score-sub { font-size: 10px; color: var(--muted); letter-spacing: 0.06em; text-transform: uppercase; text-align: right; margin-top: 2px; }

/* íƒœê·¸ */
.result-tags-row {
  padding: 14px 26px;
  display: flex;
  gap: 7px;
  flex-wrap: wrap;
}
.r-tag {
  font-size: 11px;
  font-weight: 500;
  padding: 3px 10px;
  border-radius: 4px;
  border: 1px solid var(--border);
  color: var(--muted);
  background: var(--surface2);
}
.r-tag.bf  { color: var(--bf);  border-color: rgba(26,86,219,0.2);  background: var(--bf-lt); }
.r-tag.yfn { color: var(--yfn); border-color: rgba(13,158,106,0.2); background: var(--yfn-lt); }
.r-tag.warn { color: var(--warn); border-color: rgba(217,119,6,0.2); background: var(--warn-lt); }

/* ìê²© ë¯¸ë‹¬ ë°•ìŠ¤ */
.dq-box {
  margin: 0 26px 16px;
  background: var(--danger-lt);
  border: 1px solid rgba(220,38,38,0.2);
  border-radius: 8px;
  padding: 13px 16px;
  font-size: 12px;
  color: var(--danger);
  line-height: 1.7;
}

/* 4YFN ì¹´í…Œê³ ë¦¬ */
.cat-box {
  margin: 0 26px 16px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  background: var(--yfn-lt);
  border: 1px solid rgba(13,158,106,0.2);
  border-radius: 6px;
  font-size: 12px;
  color: var(--yfn);
  font-weight: 600;
}

/* ê²Œì´íŠ¸ */
.gates-section { padding: 0 26px 18px; }
.gates-label { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; color: var(--muted); margin-bottom: 10px; }
.gate-row { display: flex; align-items: center; gap: 9px; margin-bottom: 7px; }
.gate-dot {
  width: 18px; height: 18px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 10px;
  flex-shrink: 0;
}
.gate-dot.ok  { background: #D1FAE5; color: var(--ok); }
.gate-dot.err { background: #FEE2E2; color: var(--danger); }
.gate-dot.na  { background: var(--surface2); color: var(--muted); }
.gate-text { font-size: 12px; color: var(--muted); }

/* ì ìˆ˜ ë°” */
.bars-section { padding: 4px 26px 20px; }
.bar-row { margin-bottom: 13px; }
.bar-top { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 6px; }
.bar-label { font-size: 11px; color: var(--muted); font-weight: 500; }
.bar-val { font-family: var(--font-mono); font-size: 13px; font-weight: 600; }
.bar-track { height: 6px; background: var(--surface2); border-radius: 4px; overflow: hidden; }
.bar-fill { height: 100%; width: 0; border-radius: 4px; transition: width 1.5s cubic-bezier(0.16,1,0.3,1); }

/* í‰ê°€ ì½”ë©˜íŠ¸ */
.assessment-box {
  margin: 0 26px 18px;
  background: var(--surface2);
  border-radius: 8px;
  padding: 16px 18px;
  border-left: 3px solid var(--shinhan);
}
.assessment-label { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; color: var(--muted); margin-bottom: 8px; }
.assessment-text { font-size: 13px; color: #555; line-height: 1.85; font-style: italic; }

/* ìœ ì‚¬ ì‚¬ë¡€ */
.comparable-box {
  margin: 0 26px 18px;
  background: var(--gold-lt);
  border: 1px solid rgba(197,151,43,0.2);
  border-radius: 8px;
  padding: 13px 16px;
}
.comparable-label { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; color: var(--gold); margin-bottom: 6px; }
.comparable-text { font-size: 12px; color: #6B5200; line-height: 1.7; }

/* ê°•ì /ì•½ì  */
.sw-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  padding: 0 26px 18px;
}
@media (max-width: 520px) { .sw-grid { grid-template-columns: 1fr; } }
.sw-col { }
.sw-col-title { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 10px; display: flex; align-items: center; gap: 5px; }
.sw-col-title.str { color: var(--ok); }
.sw-col-title.wk  { color: var(--danger); }
.sw-item { font-size: 12px; color: #555; line-height: 1.65; margin-bottom: 7px; padding: 8px 12px; border-radius: 6px; }
.sw-item.str { background: #F0FDF4; border-left: 3px solid #86EFAC; }
.sw-item.wk  { background: #FFF1F2; border-left: 3px solid #FCA5A5; }

/* ë¦¬ìŠ¤í¬ */
.risks-section { padding: 0 26px 18px; }
.risks-label { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; color: var(--warn); margin-bottom: 10px; }
.risk-item { font-size: 12px; color: #555; padding: 9px 13px; background: var(--warn-lt); border-left: 3px solid #FCD34D; border-radius: 6px; margin-bottom: 7px; line-height: 1.65; }

/* SDG */
.sdg-section { padding: 0 26px 18px; }
.sdg-label { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; color: var(--yfn); margin-bottom: 10px; }
.sdg-tags { display: flex; gap: 7px; flex-wrap: wrap; }
.sdg-tag { font-size: 11px; font-weight: 600; padding: 4px 11px; background: var(--yfn-lt); color: var(--yfn); border-radius: 20px; border: 1px solid rgba(13,158,106,0.2); }

/* ì•¡ì…˜ í”Œëœ */
.actions-section { padding: 0 26px 26px; }
.actions-label { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; color: var(--muted); margin-bottom: 12px; }
.action-row { display: flex; gap: 11px; align-items: flex-start; margin-bottom: 10px; }
.action-pri {
  font-size: 10px;
  font-weight: 700;
  font-family: var(--font-mono);
  letter-spacing: 0.04em;
  padding: 3px 8px;
  border-radius: 4px;
  flex-shrink: 0;
  margin-top: 1px;
}
.action-pri.H { background: #FEE2E2; color: var(--danger); }
.action-pri.M { background: var(--warn-lt); color: var(--warn); }
.action-pri.L { background: #D1FAE5; color: var(--ok); }
.action-body { flex: 1; }
.action-area { font-size: 13px; font-weight: 700; color: var(--text); margin-bottom: 2px; }
.action-text { font-size: 12px; color: var(--muted); line-height: 1.6; }

/* â”€â”€ ë¦¬ì…‹ ë²„íŠ¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.btn-reset {
  margin-top: 32px;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--muted);
  font-family: var(--font-main);
  font-size: 13px;
  font-weight: 500;
  padding: 10px 20px;
  cursor: pointer;
  transition: all 0.18s;
}
.btn-reset:hover { border-color: var(--muted); color: var(--text); }

/* â”€â”€ í‘¸í„° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.site-footer {
  background: var(--surface);
  border-top: 1px solid var(--border);
  padding: 28px 32px;
  text-align: center;
}
.footer-logo { font-size: 13px; font-weight: 700; color: var(--shinhan); margin-bottom: 6px; }
.footer-sub { font-size: 11px; color: var(--light); line-height: 1.7; }

/* â”€â”€ êµ¬ë¶„ì„  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.divider { height: 1px; background: var(--border); margin: 28px 0; }

/* ë°˜ì‘í˜• */
@media (max-width: 600px) {
  .hero { padding: 48px 20px 40px; }
  .main { padding: 28px 16px 80px; }
  .site-header { padding: 0 18px; }
  .run-section { flex-direction: column; align-items: stretch; }
  .btn-run { justify-content: center; }
}
</style>
</head>
<body>

<!-- â•â•â•â• í—¤ë” â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header class="site-header">
  <div class="logo-wrap">
    <div class="logo-icon">ğŸŒ</div>
    <div>
      <div class="logo-text-main">ì‹ í•œ ìŠ¤í€˜ì–´ë¸Œë¦¿ì§€</div>
      <div class="logo-text-sub">SHINHAN SQUARE BRIDGE GLOBAL</div>
    </div>
    <span class="header-badge">GLOBAL</span>
  </div>
  <div class="header-right">Competition Simulator</div>
</header>

<!-- â•â•â•â• íˆì–´ë¡œ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="hero">
  <div class="hero-inner">
    <div class="hero-eyebrow">ğŸ† ê¸€ë¡œë²Œ ìŠ¤íƒ€íŠ¸ì—… ê²½ì—° ì‹œë®¬ë ˆì´í„°</div>
    <h1>ë‚˜ì˜ ìŠ¤íƒ€íŠ¸ì—…,<br><span>1ì°¨ ê´€ë¬¸</span> í†µê³¼í•  ìˆ˜ ìˆì„ê¹Œ?</h1>
    <p class="hero-desc">
      ì‹¤ì œ ê²½ì—° ì„ ì • ê¸°ì¤€ê³¼ ì—­ëŒ€ ìˆ˜ìƒ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ<br>
      AIê°€ ì„ ì • ê°€ëŠ¥ì„±ì„ ë¶„ì„í•©ë‹ˆë‹¤.
    </p>
    <div class="hero-pills">
      <span class="pill bf">âš”ï¸ TechCrunch Startup Battlefield 200</span>
      <span class="pill yfn">ğŸ“¡ MWC 4YFN Awards Top 20</span>
      <span class="pill neutral">ê³µê°œ ë°ì´í„° ê¸°ë°˜ ì‹œë®¬ë ˆì´ì…˜</span>
    </div>
  </div>
</section>

<!-- â•â•â•â• ë©”ì¸ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<main class="main">

  <!-- ê²½ì—° ì„ íƒ -->
  <div class="sec-title">ì°¸ê°€í•  ê²½ì—° ì„ íƒ</div>
  <div class="card" style="margin-bottom:20px;">
    <div class="comp-grid">
      <div class="comp-card" id="opt-bf" onclick="toggleComp('bf')">
        <div class="comp-icon">âš”ï¸</div>
        <div class="comp-name bf">Startup Battlefield</div>
        <div class="comp-goal">ëª©í‘œ: Battlefield 200 ì„ ì •</div>
        <div class="comp-desc">ìˆ˜ì²œ ê°œ ì§€ì› â†’ 200ê°œì‚¬ ì„ ì •<br>$100,000 ë¬´ì§€ë¶„ ìƒê¸ˆ</div>
        <div class="comp-check" id="chk-bf"></div>
      </div>
      <div class="comp-card" id="opt-yfn" onclick="toggleComp('yfn')">
        <div class="comp-icon">ğŸ“¡</div>
        <div class="comp-name yfn">MWC 4YFN Awards</div>
        <div class="comp-goal">ëª©í‘œ: Top 20 ì„ ì •</div>
        <div class="comp-desc">ì¹´í…Œê³ ë¦¬ë³„ 4ê°œì‚¬ ì„ ì •<br>â‚¬20,000 + GSMA Foundry</div>
        <div class="comp-check" id="chk-yfn"></div>
      </div>
    </div>
  </div>

  <!-- ê¸°ë³¸ ì •ë³´ -->
  <div class="sec-title">ìŠ¤íƒ€íŠ¸ì—… ê¸°ë³¸ ì •ë³´</div>
  <div class="form-section">
    <div class="form-grid-2">
      <div class="field">
        <label>íšŒì‚¬ëª…<span class="req">*</span></label>
        <input type="text" id="f-name" placeholder="ì˜ˆ: Acme AI" oninput="checkReady()">
      </div>
      <div class="field">
        <label>ë³¸ì‚¬ êµ­ê°€<span class="req">*</span></label>
        <input type="text" id="f-country" placeholder="ì˜ˆ: South Korea" oninput="checkReady()">
      </div>
      <div class="field full">
        <label>í•œ ì¤„ ì†Œê°œ<span class="req">*</span></label>
        <input type="text" id="f-oneliner" placeholder="ì˜ˆ: AI ê¸°ë°˜ ì†Œê·œëª¨ ë†ê°€ ë³‘ì¶©í•´ ì¡°ê¸° íƒì§€ í”Œë«í¼" oninput="checkReady()">
      </div>
      <div class="field">
        <label>í€ë”© ìŠ¤í…Œì´ì§€<span class="req">*</span></label>
        <select id="f-stage" onchange="checkReady()">
          <option value="">ì„ íƒí•˜ì„¸ìš”</option>
          <option>Bootstrapped (ìì²´ ìê¸ˆ)</option>
          <option>Pre-Seed</option>
          <option>Seed</option>
          <option>Series A</option>
          <option>Series B+</option>
        </select>
      </div>
      <div class="field">
        <label>ì´ íˆ¬ììœ ì¹˜ì•¡ (USD)</label>
        <input type="text" id="f-raised" placeholder="ì˜ˆ: 500,000">
      </div>
      <div class="field">
        <label>ì–¸ë¡  ë…¸ì¶œ ìˆ˜ì¤€</label>
        <select id="f-press">
          <option value="">ì„ íƒí•˜ì„¸ìš”</option>
          <option>None (ë…¸ì¶œ ì—†ìŒ)</option>
          <option>Local only (ì§€ì—­/ì—…ê³„ ë§¤ì²´)</option>
          <option>National (ì£¼ìš” ì¼ê°„ì§€)</option>
          <option>Major tech press (TechCrunch, Forbes ë“±)</option>
        </select>
      </div>
      <div class="field">
        <label>ì˜ì–´ ë°œí‘œì ë°”ë¥´ì…€ë¡œë‚˜ í˜„ì¥ ì°¸ì„ ê°€ëŠ¥ <span class="yfn-badge">4YFN</span></label>
        <select id="f-english">
          <option value="">ì„ íƒí•˜ì„¸ìš”</option>
          <option value="yes">ê°€ëŠ¥ (ì˜ì–´ ì°½ì—…ì/Cë ˆë²¨)</option>
          <option value="no">ë¶ˆê°€ (ì˜ì–´ ë°œí‘œì ì—†ìŒ)</option>
          <option value="maybe">ë¶ˆí™•ì‹¤</option>
        </select>
      </div>
    </div>
  </div>

  <!-- íŒ€ & ë¬¸ì œ -->
  <div class="sec-title">íŒ€ & ë¬¸ì œ</div>
  <div class="form-section">
    <div class="form-grid-2">
      <div class="field full">
        <label>ì°½ì—…íŒ€ ì†Œê°œ<span class="req">*</span></label>
        <textarea id="f-team" placeholder="ê³µë™ì°½ì—…ì ë°°ê²½, ì—­í• , ê´€ë ¨ ì „ë¬¸ì„±&#10;ì˜ˆ: CEO â€” ì „ ì‚¼ì„± ë°˜ë„ì²´ 10ë…„ / CTO â€” KAIST ë°•ì‚¬, ML ì „ê³µ" oninput="checkReady()"></textarea>
      </div>
      <div class="field full">
        <label>í•´ê²°í•˜ëŠ” ë¬¸ì œ<span class="req">*</span></label>
        <textarea id="f-problem" placeholder="ëˆ„ê°€, ì–´ë–¤ ë¬¸ì œë¥¼ ê²ªê³  ìˆëŠ”ì§€. ë¬¸ì œì˜ ê·œëª¨ì™€ ì‹¬ê°ì„±." oninput="checkReady()"></textarea>
      </div>
    </div>
  </div>

  <!-- ì†”ë£¨ì…˜ & íŠ¸ë™ì…˜ -->
  <div class="sec-title">ì†”ë£¨ì…˜ & íŠ¸ë™ì…˜</div>
  <div class="form-section">
    <div class="form-grid-2">
      <div class="field full">
        <label>ì†”ë£¨ì…˜ ë° ê¸°ìˆ <span class="req">*</span></label>
        <textarea id="f-solution" placeholder="ì–´ë–»ê²Œ í•´ê²°í•˜ëŠ”ì§€, í•µì‹¬ ê¸°ìˆ  ì°¨ë³„ì , IP/íŠ¹í—ˆ ì—¬ë¶€" oninput="checkReady()"></textarea>
      </div>
      <div class="field full">
        <label>íŠ¸ë™ì…˜ ë° ê²€ì¦</label>
        <textarea id="f-traction" placeholder="í˜„ì¬ ê³ ê° ìˆ˜, ë§¤ì¶œ, MOU, íŒŒì¼ëŸ¿ ê³„ì•½, ìˆ˜ìƒ, ì•¡ì…€ëŸ¬ë ˆì´í„° ì„ ë°œ ë“±"></textarea>
      </div>
      <div class="field">
        <label>ì‹œì¥ ê·œëª¨ (TAM / SAM / SOM)</label>
        <textarea id="f-market" placeholder="ê¸€ë¡œë²Œ ë˜ëŠ” íƒ€ê²Ÿ ì‹œì¥ ê·œëª¨ì™€ ê·¼ê±°" style="min-height:72px;"></textarea>
      </div>
      <div class="field">
        <label>ì§€ê¸ˆì´ íƒ€ì´ë°ì¸ ì´ìœ </label>
        <textarea id="f-timing" placeholder="ê¸°ìˆ Â·ê·œì œÂ·ì‹œì¥ ë³€í™” ë“± ì§€ê¸ˆ ì´ ê¸°íšŒê°€ ì¡´ì¬í•˜ëŠ” ì´ìœ " style="min-height:72px;"></textarea>
      </div>
    </div>
  </div>

  <!-- ì„íŒ©íŠ¸ & ì—°ê²°ì„± -->
  <div class="sec-title">ì„íŒ©íŠ¸ & ì—°ê²°ì„±</div>
  <div class="form-section">
    <div class="form-grid-2">
      <div class="field full">
        <label>ì‚¬íšŒì  ì„íŒ©íŠ¸ / SDG ì—°ê´€ì„±</label>
        <textarea id="f-impact" placeholder="UN SDG ë²ˆí˜¸ ë° ì—°ê´€ ë‚´ìš© (ì˜ˆ: SDG 2 ê¸°ì•„ ì¢…ì‹, SDG 3 ê±´ê°•)&#10;ì‚¬íšŒÂ·í™˜ê²½ì  ì„íŒ©íŠ¸ ê·œëª¨"></textarea>
      </div>
      <div class="field full">
        <label>ëª¨ë°”ì¼ / 5G / ì—°ê²°ì„± ê´€ë ¨ì„± <span class="yfn-badge">4YFN</span></label>
        <textarea id="f-mobile" placeholder="5G, IoT, ìœ„ì„±, ì—£ì§€ ì»´í“¨íŒ…, í…”ë ˆì½¤ ë“±ê³¼ì˜ ì—°ê´€ì„± (4YFN ì§€ì› ì‹œ ì¤‘ìš”)"></textarea>
      </div>
    </div>
  </div>

  <!-- ì‹¤í–‰ -->
  <div class="run-section">
    <div class="run-note">
      <strong>ì…ë ¥ ì •ë³´ëŠ” ì„œë²„ì— ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</strong><br>
      ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ AIì—ê²Œ ì „ì†¡í•˜ê³  ë¶„ì„ ê²°ê³¼ë§Œ í‘œì‹œë©ë‹ˆë‹¤.<br>
      ê³µê°œ ê²½ì—° ë°ì´í„° ê¸°ë°˜ ì‹œë®¬ë ˆì´ì…˜ Â· ì‹¤ì œ ì„ ì • ê²°ê³¼ ë³´ì¥ ì—†ìŒ
    </div>
    <button class="btn-run" id="runBtn" onclick="runSim()" disabled>
      ì„ ì • ê°€ëŠ¥ì„± ë¶„ì„í•˜ê¸° <span class="btn-arrow">â†’</span>
    </button>
  </div>

  <!-- ë¡œê·¸ -->
  <div id="log-section">
    <div class="log-card">
      <div class="log-card-header">
        <div class="log-dot" id="logDot"></div>
        <span class="log-title-text" id="logLabel">AI ë¶„ì„ ì¤‘...</span>
      </div>
      <div id="log-body"></div>
    </div>
  </div>

  <!-- ê²°ê³¼ -->
  <div id="results-section">
    <div class="sec-title" style="margin-top:32px;">ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼</div>
    <div id="results-container"></div>
    <button class="btn-reset" onclick="resetSim()">â† ìƒˆ ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘</button>
  </div>

</main>

<!-- â•â•â•â• í‘¸í„° â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<footer class="site-footer">
  <div class="footer-logo">ì‹ í•œ ìŠ¤í€˜ì–´ë¸Œë¦¿ì§€ ê¸€ë¡œë²Œ Â· Competition Simulator</div>
  <div class="footer-sub">
    ë³¸ ì‹œë®¬ë ˆì´í„°ëŠ” ê³µê°œëœ ê²½ì—° ì„ ì • ê¸°ì¤€ê³¼ ì—­ëŒ€ ì‚¬ë¡€ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œ AI ë¶„ì„ ë„êµ¬ì…ë‹ˆë‹¤.<br>
    ì‹¤ì œ ê²½ì—° ì„ ì • ê²°ê³¼ì™€ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë©°, ì°¸ê³ ìš©ìœ¼ë¡œë§Œ í™œìš©í•´ì£¼ì„¸ìš”.
  </div>
</footer>

<script>
const WORKER_URL = "https://divine-star-eb4a.june-27b.workers.dev/";

const selected = new Set();
let running = false;

const COMPS = {
  bf: {
    name: 'TechCrunch Startup Battlefield',
    cls: 'bf',
    probKey: 'bf200Probability',
    criteria: [
      { key: 'disruption', label: 'Disruptive Potential',         w: 30 },
      { key: 'mvp',        label: 'MVP & Demo Readiness',         w: 25 },
      { key: 'team',       label: 'Founding Team',                w: 20 },
      { key: 'diversity',  label: 'Vertical/Geo Diversity Fit',   w: 15 },
      { key: 'press',      label: 'Press Coverage (low = better)',w: 10 },
    ],
    system: `You are a TechCrunch editorial reviewer simulating the Startup Battlefield 200 first-gate selection.

YOUR ONLY GOAL: Determine if this startup would be selected into the Startup Battlefield 200 (BF200) â€” the first cut from thousands of applicants down to 200 companies.

OFFICIAL HARD ELIGIBILITY GATES (fail any = Disqualified):
1. Must be pre-Series A at application time. Series A already closed â†’ Disqualified (EXCEPT biotech/hardware/deep materials/nuclear/space). Series B+ â†’ Always Disqualified.
2. Must have a working MVP demonstrable in live real-time video. No animated/AI-generated demos. No product = Disqualified.
3. Must be a tech startup (any vertical, any geography).

BF200 SELECTION CRITERIA:
A) DISRUPTIVE POTENTIAL (30%): "Step function change" to industry or geography. Genuinely novel, not incremental. Would a TechCrunch editor write a breaking headline? 2024 sectors: AI/ML, SaaS, healthtech, biotech, climate, fintech, hardware/robotics/IoT, security.
B) MVP & DEMO QUALITY (25%): Working demonstrable product. Closed/private beta fine. Strong preference for companies launching publicly FIRST TIME through Battlefield.
C) FOUNDING TEAM (20%): Domain expertise, complementary skills, founder-market fit.
D) VERTICAL & GEO DIVERSITY FIT (15%): TechCrunch curates 200 across verticals AND geographies. Underrepresented country or niche = advantage.
E) PRESS COVERAGE (10% â€” INVERTED: less = higher score): Ideal = minimal to zero. Score 100 = no coverage, 0 = heavily covered.

REAL EXAMPLES:
Selected: Salva Health 2024 winner (portable breast cancer detector, rural Latin America), BioticsAI 2023 winner (AI prenatal ultrasound, MD+ML founders), Minerva Lithium 2022 winner (novel cleantech), Gecko Materials (gecko-inspired adhesive), NitroFix (zero-emission ammonia), ForestGuard (solar IoT wildfire detection 80% earlier), MabLab (drug adulterant test strips).
NOT selected: Generic LLM wrapper with no moat, SaaS with no 10x improvement, no working product, heavily press-covered, Series A closed (unless hard tech).

CALIBRATION: Score 70+ â†’ BF200 likely (~60-80%). Score 55-69 â†’ borderline (~20-40%). Under 55 â†’ unlikely. Overall acceptance ~2-5%.

Respond ONLY with valid JSON (no markdown, no text outside JSON):
{"eligibilityGates":{"fundingStageOk":true,"mvpExists":true,"isTechStartup":true,"overallEligible":true,"disqualifyReason":null},"scores":{"disruption":0,"mvp":0,"team":0,"diversity":0,"press":0},"weightedScore":0,"verdict":"BF200 Selected âœ“","bf200Probability":"X%","verdictRationale":"2-3 sentences as TechCrunch editor","topStrengths":["s1","s2","s3"],"topWeaknesses":["w1","w2","w3"],"keyRisks":["r1"],"improvementActions":[{"priority":"HIGH","area":"area","action":"advice"}],"comparableSelected":"real company + reason","sectorDetected":"sector","stageDetected":"stage","geoDetected":"region"}`
  },
  yfn: {
    name: 'MWC 4YFN Awards',
    cls: 'yfn',
    probKey: 'top20Probability',
    criteria: [
      { key: 'innovation', label: 'Innovation & IP',        w: 25 },
      { key: 'traction',   label: 'Soundness & Traction',   w: 25 },
      { key: 'potential',  label: 'Scalability Potential',  w: 20 },
      { key: 'impact',     label: 'Impact & SDG Alignment', w: 20 },
      { key: 'fit',        label: 'Team & Market Fit',      w: 10 },
    ],
    system: `You are a 4YFN Awards remote investor jury panelist evaluating for Top 20 selection.

YOUR ONLY GOAL: Determine if this startup would be selected into the 4YFN Top 20 â€” 4 per category, 5 categories.

OFFICIAL HARD ELIGIBILITY GATES (fail any = Disqualified):
1. Must be a digital/tech startup. Non-tech/pure services â†’ Disqualified.
2. Must send a senior English-speaking representative (founder or C-level) to Barcelona IN PERSON for 4 full days. Remote = NOT allowed. No English speaker â†’ Disqualified.

CATEGORY: Assign exactly one â€” Health Tech / Fintech / Climate Tech / Mobile Frontiers / Digital Horizons

SELECTION CRITERIA (official 4YFN Rules of Entry):
A) INNOVATION (25%): Uniqueness vs global market, proprietary rights (patents/trade secrets/exclusive data), innovation central to business model.
B) SOUNDNESS & TRACTION (25%): Paying customers, MoUs/LOIs, pilot agreements, ARR/MRR, awards, accelerators (MORE = BETTER, opposite of Battlefield).
C) POTENTIAL (20%): International scalability roadmap, financial return potential, path to Series A/B within 18-24 months.
D) IMPACT (20%) [2026 theme: Infinite AI]: Team diversity, UN SDG contribution, AI-driven impact especially valued.
E) FIT (10%): Team-problem fit, realistic target market, current resources sufficient.

REAL EXAMPLES:
Selected: Bankuish 2025 winner Fintech (gig worker credit scoring, bank traction, Colombiaâ†’US expansion), Qilimanjaro 2024 winner Mobile Frontiers (cloud quantum annealer), The Blue Box 2025 Health Tech (urine breast cancer detection 88.42% sensitivity, EC funding), Orquest 2025 Digital Horizons (AI workforce scheduling Dior+H&M 77 countries), Doctor Scrap 2026 Climate Tech (AI circular materials 160+ countries), Kistpay 2026 Fintech (smartphone financing unbanked, GSMA/UNDP/ITU recognized), Skyfora 2026 Climate Tech (5G tower atmospheric sensing).
NOT selected: Consumer app with no B2B/SDG, local-only business, TRL 1-3 pure research, no English speaker for Barcelona.

CALIBRATION: Score 75+ â†’ Top 20 likely (~50-70% in category). Score 60-74 â†’ borderline. Under 60 â†’ unlikely.

Respond ONLY with valid JSON (no markdown, no text outside JSON):
{"eligibilityGates":{"isDigitalTech":true,"englishSpeakerAvailable":true,"overallEligible":true,"disqualifyReason":null},"assignedCategory":"Health Tech","categoryRationale":"one sentence","categoryCompetitiveness":"Medium","scores":{"innovation":0,"traction":0,"potential":0,"impact":0,"fit":0},"weightedScore":0,"verdict":"Top 20 Selected âœ“","top20Probability":"X%","verdictRationale":"2-3 sentences as GSMA jury","topStrengths":["s1","s2","s3"],"topWeaknesses":["w1","w2","w3"],"keyRisks":["r1"],"improvementActions":[{"priority":"HIGH","area":"area","action":"advice"}],"comparableSelected":"real company + reason","sdgAlignment":["SDG X: Name"],"sectorDetected":"sector","stageDetected":"stage","geoDetected":"region"}`
  }
};

/* â”€â”€ ê²½ì—° í† ê¸€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function toggleComp(id) {
  const card = document.getElementById('opt-' + id);
  const chk  = document.getElementById('chk-' + id);
  if (selected.has(id)) {
    selected.delete(id);
    card.className = 'comp-card';
    chk.textContent = '';
  } else {
    selected.add(id);
    card.className = 'comp-card active-' + id;
    chk.textContent = 'âœ“';
  }
  checkReady();
}

/* â”€â”€ ì‹¤í–‰ ë²„íŠ¼ í™œì„±í™” ì²´í¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function checkReady() {
  const ok = selected.size > 0
    && document.getElementById('f-name').value.trim()
    && document.getElementById('f-country').value.trim()
    && document.getElementById('f-oneliner').value.trim()
    && document.getElementById('f-stage').value
    && document.getElementById('f-team').value.trim()
    && document.getElementById('f-problem').value.trim()
    && document.getElementById('f-solution').value.trim()
    && !running;
  document.getElementById('runBtn').disabled = !ok;


}

/* â”€â”€ ë¡œê·¸ ì¶œë ¥ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function addLog(msg, cls) {
  const el = document.getElementById('log-body');
  const d = document.createElement('div');
  if (cls) d.className = cls;
  d.textContent = msg;
  el.appendChild(d);
  el.scrollTop = el.scrollHeight;
}

/* â”€â”€ í”„ë¡¬í”„íŠ¸ ë¹Œë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function buildPrompt() {
  const g = id => document.getElementById(id)?.value?.trim() || 'N/A';
  return `STARTUP APPLICATION
===================
Company: ${g('f-name')}
One-liner: ${g('f-oneliner')}
Country: ${g('f-country')}
Funding Stage: ${g('f-stage')}
Total Raised (USD): ${g('f-raised') !== 'N/A' ? '$' + g('f-raised') : 'N/A'}
Press Coverage: ${g('f-press')}
English Speaker for Barcelona: ${g('f-english') === 'yes' ? 'Yes' : g('f-english') === 'no' ? 'No' : 'Not specified'}

FOUNDING TEAM
-------------
${g('f-team')}

PROBLEM STATEMENT
-----------------
${g('f-problem')}

SOLUTION & TECHNOLOGY
---------------------
${g('f-solution')}

TRACTION & VALIDATION
---------------------
${g('f-traction')}

MARKET SIZE
-----------
${g('f-market')}

WHY NOW
-------
${g('f-timing')}

SOCIAL IMPACT / SDG
-------------------
${g('f-impact')}

MOBILE / CONNECTIVITY RELEVANCE (4YFN)
---------------------------------------
${g('f-mobile')}`;
}

/* â”€â”€ Claude API í˜¸ì¶œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function callClaude(system, user) {
  const res = await fetch(WORKER_URL, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      model: 'claude-sonnet-4-20250514',
      max_tokens: 1200,
      system,
      messages: [{ role: 'user', content: user }],
    }),
  });
  if (!res.ok) {
    const e = await res.json().catch(() => ({}));
    throw new Error(e?.error?.message || `ì˜¤ë¥˜ ${res.status}`);
  }
  const data = await res.json();
  const text = (data.content || []).map(b => b.text || '').join('');
  const match = text.match(/\{[\s\S]*\}/);
  if (!match) throw new Error('AI ì‘ë‹µ íŒŒì‹± ì‹¤íŒ¨');
  return JSON.parse(match[0]);
}

/* â”€â”€ ì ìˆ˜ ìƒ‰ìƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function scoreColor(s) { return s >= 75 ? 'high' : s >= 60 ? 'mid' : 'low'; }
function barColorStyle(s) {
  return s >= 75 ? 'var(--ok)' : s >= 60 ? 'var(--warn)' : 'var(--danger)';
}

/* â”€â”€ ê²°ê³¼ ë Œë”ë§ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function renderResult(compId, r) {
  const comp   = COMPS[compId];
  const isBF   = compId === 'bf';
  const verdict = r.verdict || 'Not Selected';
  const isDQ   = verdict === 'Disqualified';
  const isSel  = verdict.includes('Selected');
  const prob   = isBF ? r.bf200Probability : r.top20Probability;
  const ws     = r.weightedScore || 0;
  const vCls   = isDQ ? 'disqualified' : isSel ? 'selected' : 'not-selected';
  const vText  = isDQ ? 'ğŸš« ìê²© ë¯¸ë‹¬'
               : isSel ? (isBF ? 'âœ… BF200 ì„ ì • ê°€ëŠ¥' : 'âœ… Top 20 ì„ ì • ê°€ëŠ¥')
               : 'âŒ ì„ ì • ì–´ë ¤ì›€';

  /* íƒœê·¸ */
  const tags = [
    r.sectorDetected && `<span class="r-tag">${r.sectorDetected}</span>`,
    r.stageDetected  && `<span class="r-tag">${r.stageDetected}</span>`,
    r.geoDetected    && `<span class="r-tag">${r.geoDetected}</span>`,
    !isBF && r.assignedCategory && `<span class="r-tag yfn">${r.assignedCategory}</span>`,
    !isBF && r.categoryCompetitiveness && `<span class="r-tag warn">${r.categoryCompetitiveness} Competition</span>`,
  ].filter(Boolean).join('');

  /* ê²Œì´íŠ¸ */
  const gateRows = (isBF ? [
    { label: 'Pre-Series A ë˜ëŠ” í•˜ë“œí…Œí¬ ì˜ˆì™¸', ok: r.eligibilityGates?.fundingStageOk },
    { label: 'ì‘ë™í•˜ëŠ” MVP / ë¼ì´ë¸Œ ë°ëª¨ ê°€ëŠ¥', ok: r.eligibilityGates?.mvpExists },
    { label: 'í…Œí¬ ìŠ¤íƒ€íŠ¸ì—… ì—¬ë¶€', ok: r.eligibilityGates?.isTechStartup },
  ] : [
    { label: 'ë””ì§€í„¸/í…Œí¬ ìŠ¤íƒ€íŠ¸ì—…', ok: r.eligibilityGates?.isDigitalTech },
    { label: 'ì˜ì–´ ë°œí‘œì ë°”ë¥´ì…€ë¡œë‚˜ í˜„ì¥ ì°¸ì„ ê°€ëŠ¥', ok: r.eligibilityGates?.englishSpeakerAvailable, na: r.eligibilityGates?.englishSpeakerAvailable === undefined },
  ]).map(g => `<div class="gate-row">
    <div class="gate-dot ${g.na ? 'na' : g.ok ? 'ok' : 'err'}">${g.na ? 'â€”' : g.ok ? 'âœ“' : 'âœ—'}</div>
    <span class="gate-text">${g.label}</span>
  </div>`).join('');

  /* ë°” */
  const barId = () => 'b' + Math.random().toString(36).slice(2);
  const barsHtml = comp.criteria.map(c => {
    const s = r.scores?.[c.key] || 0;
    const id = barId();
    setTimeout(() => {
      const el = document.getElementById(id);
      if (el) el.style.width = s + '%';
    }, 200);
    return `<div class="bar-row">
      <div class="bar-top">
        <span class="bar-label">${c.label} Â· ${c.w}%</span>
        <span class="bar-val" style="color:${barColorStyle(s)}">${s}</span>
      </div>
      <div class="bar-track"><div class="bar-fill" id="${id}" style="background:${barColorStyle(s)}"></div></div>
    </div>`;
  }).join('');

  /* SDG */
  const sdgHtml = (!isBF && r.sdgAlignment?.length)
    ? `<div class="sdg-section">
        <div class="sdg-label">ğŸŒ± UN SDG ì—°ê´€ì„±</div>
        <div class="sdg-tags">${r.sdgAlignment.map(s => `<span class="sdg-tag">${s}</span>`).join('')}</div>
      </div>` : '';

  /* ì•¡ì…˜ */
  const actionsHtml = (r.improvementActions || []).map(a => `
    <div class="action-row">
      <div class="action-pri ${a.priority[0]}">${a.priority}</div>
      <div class="action-body">
        <div class="action-area">${a.area}</div>
        <div class="action-text">${a.action}</div>
      </div>
    </div>`).join('');

  const card = document.createElement('div');
  card.className = 'result-card';
  card.style.borderTop = `4px solid var(--${isBF ? 'bf' : 'yfn'})`;
  card.innerHTML = `
    <div class="result-top">
      <div>
        <div class="result-comp-badge ${comp.cls}">${isBF ? 'âš”ï¸' : 'ğŸ“¡'} ${comp.name}</div>
        <div class="verdict-main ${vCls}">${vText}</div>
        <div class="verdict-prob">ì„ ì • í™•ë¥ : <strong style="color:var(--${isBF?'bf':'yfn'})">${prob || 'N/A'}</strong></div>
      </div>
      <div class="score-block">
        <div class="score-big ${scoreColor(ws)}">${ws}</div>
        <div class="score-sub">/ 100 ì </div>
      </div>
    </div>
    <div class="result-tags-row">${tags}</div>
    ${isDQ && r.eligibilityGates?.disqualifyReason ? `<div class="dq-box">ğŸš« <strong>ìê²© ë¯¸ë‹¬ ì‚¬ìœ :</strong> ${r.eligibilityGates.disqualifyReason}</div>` : ''}
    ${!isBF && r.assignedCategory ? `<div style="padding:0 26px 4px"><div class="cat-box">ğŸ“‚ ì¹´í…Œê³ ë¦¬: ${r.assignedCategory}${r.categoryRationale ? ' â€” ' + r.categoryRationale : ''}</div></div>` : ''}
    <div class="gates-section"><div class="gates-label">ìê²© ìš”ê±´ í™•ì¸</div>${gateRows}</div>
    <div class="bars-section">${barsHtml}</div>
    <div class="assessment-box" style="margin:0 26px 18px">
      <div class="assessment-label">ğŸ” ${isBF ? 'TechCrunch ì—ë””í„° í‰ê°€' : 'GSMA ì‹¬ì‚¬ìœ„ì› í‰ê°€'}</div>
      <div class="assessment-text">"${r.verdictRationale || ''}"</div>
    </div>
    ${r.comparableSelected ? `<div class="comparable-box"><div class="comparable-label">â­ ìœ ì‚¬ ì„ ì • ì‚¬ë¡€</div><div class="comparable-text">${r.comparableSelected}</div></div>` : ''}
    ${sdgHtml}
    <div class="sw-grid">
      <div class="sw-col">
        <div class="sw-col-title str">âœ¦ ê°•ì </div>
        ${(r.topStrengths || []).map(s => `<div class="sw-item str">${s}</div>`).join('')}
      </div>
      <div class="sw-col">
        <div class="sw-col-title wk">âœ¦ ì•½ì </div>
        ${(r.topWeaknesses || []).map(s => `<div class="sw-item wk">${s}</div>`).join('')}
      </div>
    </div>
    ${r.keyRisks?.length ? `<div class="risks-section"><div class="risks-label">âš  ì£¼ìš” ë¦¬ìŠ¤í¬</div>${r.keyRisks.map(x => `<div class="risk-item">${x}</div>`).join('')}</div>` : ''}
    <div class="actions-section">
      <div class="actions-label">ğŸ“ˆ ê°œì„  ì•¡ì…˜ í”Œëœ</div>
      ${actionsHtml}
    </div>`;
  document.getElementById('results-container').appendChild(card);
}

/* â”€â”€ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function runSim() {
  if (running) return;
  running = true;
  checkReady();

  const comps = [...selected];
  const prompt = buildPrompt();

  document.getElementById('log-section').style.display = 'block';
  document.getElementById('results-section').style.display = 'none';
  document.getElementById('results-container').innerHTML = '';
  document.getElementById('log-body').innerHTML = '';
  document.getElementById('logDot').className = 'log-dot';
  document.getElementById('logLabel').textContent = 'AI ë¶„ì„ ì¤‘...';

  addLog(`â–¶  ìŠ¤íƒ€íŠ¸ì—…: ${document.getElementById('f-name').value}`);
  addLog(`â–¶  ë¶„ì„ ê²½ì—°: ${comps.map(id => COMPS[id].name).join(' / ')}`);
  addLog('');

  for (const compId of comps) {
    const comp = COMPS[compId];
    addLog(`${compId === 'bf' ? 'âš”ï¸' : 'ğŸ“¡'}  ${comp.name} ì‹¬ì‚¬ ì‹œì‘...`, 'log-info');
    try {
      const result = await callClaude(comp.system, prompt);
      const prob = compId === 'bf' ? result.bf200Probability : result.top20Probability;
      addLog(`  âœ“  ${result.verdict}  Â·  ${result.weightedScore}ì   Â·  ì„ ì •í™•ë¥  ${prob}`, 'log-ok');
      renderResult(compId, result);
    } catch (e) {
      addLog(`  âœ—  ì˜¤ë¥˜: ${e.message}`, 'log-err');
    }
    addLog('');
  }

  addLog('âœ…  ë¶„ì„ ì™„ë£Œ', 'log-done');
  document.getElementById('logDot').className = 'log-dot done';
  document.getElementById('logLabel').textContent = 'ë¶„ì„ ì™„ë£Œ';
  document.getElementById('results-section').style.display = 'block';
  document.getElementById('results-section').scrollIntoView({ behavior: 'smooth' });

  running = false;
  checkReady();
}

/* â”€â”€ ë¦¬ì…‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function resetSim() {
  document.getElementById('results-section').style.display = 'none';
  document.getElementById('log-section').style.display = 'none';
  document.getElementById('results-container').innerHTML = '';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* ì´ˆê¸°í™” */
checkReady();
</script>
</body>
</html>
